[

    {cds, [
        {ip, "::"},
        {port, 8022},
        {net_opts, #{
            % Bump keepalive timeout up to a minute
            timeout => 60000
        }},
        {scrypt_opts, {16384, 8, 1}},
        {keyring_storage, cds_keyring_storage_env},
        {storage, cds_storage_ets},
        {session_cleaning, #{
            session_lifetime => 900,
            batch => 100
        }}
    ]},

    {lager, [
        {error_logger_redirect, true},
        {crash_log, false},
        {log_root, "/var/log/cds"},
        {handlers, [
            {lager_file_backend, [
                {file, "console.json"},
                {level, debug},
                {formatter, lager_logstash_formatter},
                {formatter_config, [
                    {message_redaction_regex_list, [
                        "[0-9]{12,19}", %% pan
                        "[0-9]{2}.[0-9]{2,4}", %% expiration date
                        "[0-9]{3,4}" %% cvv
                    ]}
                ]}
            ]}
        ]}
    ]}

].
